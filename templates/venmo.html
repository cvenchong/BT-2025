<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Venmo PPCP Demo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <style>
    body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;max-width:920px;margin:3rem auto;padding:0 1rem;}
    code{background:#f6f8fa;padding:0 .25rem;border-radius:4px}
    .box{border:1px solid #e5e7eb;border-radius:12px;padding:16px;margin:16px 0}
    .muted{color:#6b7280}
    button{font:inherit}
    .debug { 
            background: #f0f0f0; 
            padding: 10px; 
            margin: 10px 0;
            border: 1px solid #ccc;
            max-height: 200px;
            overflow-y: auto;
        }
  </style>
</head>
<body>
  <div id = "paypal-button" title = "Pay with PayPal" >
    <p> Here is the div for the PayPal button </p>
  </div>
  <div id = "venmo-button" title = "Pay with Venmo" >
    <p> Here is the div for the Venmo button </p>
  </div>

      <div class="debug">
        <strong>Debug Log:</strong>
        <div id="debugLog"></div>
    </div>

    <script>
        // Override console.log to show on page
        const debugLog = document.getElementById('debugLog');
        const originalLog = console.log;
        
        console.log = function(...args) {
            originalLog.apply(console, args);
            const logEntry = document.createElement('div');
            logEntry.textContent = args.join(' ');
            debugLog.appendChild(logEntry);
        };
        
        // Test logs
        console.log('Page loaded');
        console.log('User Agent:', navigator.userAgent);
        console.log('Window width:', window.innerWidth);
    </script>

<!-- Include the PayPal JavaScript SDK. Replace `YOUR_CLIENT_ID` with your client ID.-->
<!-- Note that `enable-funding=venmo` is added as a query parameter -->
<script src="https://www.paypal.com/sdk/js?client-id=AfTNXk4kvRIFYs2anTBbdf9__03iuJIQodXxCjtGdQQR-oLKaeBt26nz8kSbq4nw0zoHHYTcVw8OAMeX&buyer-country=US&currency=USD&components=buttons,funding-eligibility&enable-funding=venmo,paypal"></script>

<script>
  createButton(paypal.FUNDING.VENMO);
  
  createButton(paypal.FUNDING.PAYPAL);
  
  function createButton(fundingSource){
    var config = {
        fundingSource: fundingSource,
        createOrder: function(data, actions) {
            return actions.order.create({
                purchase_units: [{
                    "amount": {
                        "currency_code": "USD",
                        "value": 1
                    }
                }]
            });
        },
        onApprove: function(data, actions) {
            return actions.order.capture().then(function(details) {
                alert('Transaction completed by ' + details.payer.name.given_name + '!');
            });
        }
    };
    var button = paypal.Buttons(config);
    console.log(fundingSource + ' button is eligible? button.isEligible()=' + button.isEligible());
    if (button.isEligible()) {
        var buttonId = fundingSource.toLowerCase() + '-button';
        button.render('#' + buttonId);
    }
  }

  // Render the Venmo button into #paypal-button-container
  // paypal.Buttons({
  //   fundingSource: paypal.FUNDING.VENMO,
  //   style: {
  //     layout: 'vertical',
  //     color:  'blue',
  //     shape:  'rect'
  //   },
  //   createOrder: function(data, actions) {
  //     return actions.order.create({
  //       purchase_units: [{
  //         amount: {
  //           currency_code: 'USD',
  //           value: '10.00' // Can reference a variable or function
  //         }
  //       }]
  //     });
  //   },
  //   onApprove: function(data, actions) {
  //     return actions.order.capture().then(function(details) {
  //       alert('Transaction completed by ' + details.payer.name.given_name + '!');
  //     });
  //   }

  // }).render('#paypal-button-container')
</script>


</body>
</html>
